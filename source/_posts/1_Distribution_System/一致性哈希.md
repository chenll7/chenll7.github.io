---
title: 一致性哈希
date: '2020-11-01 11:36:10'
updated: '2020-11-07 10:37:05'
categories:
  - 1 Distribution System
---
# 参考

- [一致性哈希（Consistent Hashing）原理](http://afghl.github.io/2016/07/04/consistent-hashing.html)

# 简介

　　用于分布式存储负载均衡，能够减少存储节点增加或者减少的时候调整的存储节点的数量。

# 基本原理

　　（一致性哈希模型不考虑容灾备份，每个键值只存一份。） 

![](https://raw.githubusercontent.com/furrybear/res/master/img/20190501143624.png)

　　哈希环代表0-2^32-1的哈希值。先把存储节点映射到哈希环上，再把键映射到环上。每个存储节点存储上一个存储节点到本节点之间的键值。

　　新加入存储节点时需要进行调整。对于从左图到右图的过程，需要将NodeA的部分键值转移到NodeD上。

# 虚拟节点

　　每个物理存储节点存能力不同，虚拟为不同数量的虚拟节点再映射到环上。 
